extends ../../../views/layout.pug

block title
    title= action === 'create' ? 'New Post' : 'Edit Post'

block head
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css")

block content
    section(class="hero is-dark")
        .hero-body
            div(class="container has-text-centered")
                p.title= action === 'create' ? 'New Post' : 'Edit Post'
    .container
        .content
            section.section
                if error
                    .error
                        p= error.message

                form(method="post", enctype="multipart/form-data")
                    .columns
                        .column(class="is-one-quarter is-one-third-desktop")
                            p(class="title is-size-5") Feature Image

                            if blogPost.posterUri
                                figure(class="image")
                                    img(src=blogPost.posterUri)
                            .field
                                div(class="file has-name is-info")
                                    label.file-label
                                        input(class="file-input", type="file", name="image")
                                        span.file-cta
                                            span.file-icon
                                                i(class="fas fa-upload")
                                            span.file-label Choose a file...
                                        span(class="file-name is-invisible")

                            input(type="hidden", name="posterUri" value=blogPost.posterUri)
                        .column
                            section.content
                                .field
                                    label.label Post title
                                    .control
                                        input(class="input", type="text", placeholder="Title..." name="title", value=blogPost.title)
                                .field
                                    .control
                                        textarea(placeholder="Post text...", rows="8", name="content")
                                            = blogPost.content

                            section.content
                                div(class="field is-grouped is-grouped-right")
                                    p.control
                                        button(type="submit", class="button is-primary button-submit") #{action === 'create' ? 'Create' : 'Update'}
