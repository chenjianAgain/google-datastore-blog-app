extends ../../../views/layout.pug

block title
    title Admin blog

block navbar-right
    if !error && blogPosts.length > 0
        .navbar-item
            a(class="button is-primary" href="/admin/new-post") New post

block content
    section(class="hero is-dark")
        .hero-body
            div(class="container has-text-centered")
                h1.title Admin Panel
    .container
        .content
            section.section
                if error
                    div(class="notification is-danger")= error.message

                else
                    if blogPosts.length === 0
                        .has-text-centered
                            h2.has-text-centered No post. Let's create one!
                            a(class="button is-primary" href="/admin/new-post") New post
                    else
                        .posts
                            each item in blogPosts
                                div(class="level post")
                                    .level-left
                                        if item.posterUri
                                            div(class="level-item img-preview")
                                                div(class="o-ratio o-ratio--16:9")
                                                    div(class="o-ratio__content")
                                                        img(src=item.posterUri, class="image")
                                        .level-item
                                            p.is-size-4= item.title
                                    .level-right
                                        .level-item
                                            a(href="/blog/" + item.id) view
                                        .level-item
                                            a(href="/admin/edit-post/" + item.id) edit
                                        .level-item
                                            a(
                                                href="/admin/edit-post/" + item.id,
                                                class="delete-post",
                                                data-post-id=item.id) delete